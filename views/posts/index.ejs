<% layout('layouts/boilerplate') -%>
<h1>
	Posts Index!!!
</h1>


<div class="container-fluid">
       <div class="row">
               <div class="col-4">
                       <% include ../partials/searchFilter %>
               </div>
               <div class="col-8">
                       <div id="map"></div>
               </div>
       </div>
</div>

<% include ../partials/pagination %>

<% posts.docs.forEach(post => { %>
<h2><%= post.title %></h2>  
<div><%= post.price %></div>
<div><%= post.description %></div>
<div><%= post.location %></div>
<div><a href="/posts/<%= post.id %>">View More</a></div>
<% }) %>

<% include ../partials/pagination %>

<script>
mapboxgl.accessToken = '<%= mapBoxToken %>'
	
	var posts = { features: <%- JSON.stringify(posts.docs) %> };
</script>

<script src='/javascripts/allPostsClusterMap.js'></script>

<script src='/javascripts/post-index.js'></script>